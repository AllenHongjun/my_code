F.module("/static/common/ui/redEnv/redEnv.js",function(b,d){var a=b("/static/common/lib/tangram/base/base.js");function k(s){var o=s.width||300;var u=s.height||460;var n=(typeof s.id=="undefined")?"red-win":s.id;var p=(typeof s.mask=="undefined")?true:false;var t=s.callback||null;var r="",q="";if(s.btn1){r=a.string.format("<input type='button' class='win-btn btn1 #{class}' id='#{id}' value='#{value}'/>",{value:s.btn1.value,id:s.btn1.id,"class":s.btn1["class"]||""})}if(s.btn2){q=a.string.format("<input type='button' class='win-btn btn2 #{class}' id='#{id}' value='#{value}'/>",{value:s.btn2.value,id:s.btn2.id,"class":s.btn2["class"]||""})}var v="<div class='win-close' title='\u5173\u95ed'></div><div class='win-content'>#{content}</div>";if(s.btn1){v+="<div class='win-btns'>"+r+q+"</div>"}if(s.title){v="<div class='win-title'>"+s.title+"</div>"+v}if(p){m()}v=a.string.format(v,{content:s.content});l(o,u,n,v,s)}function m(){var n=a.dom.create("div");a(n).attr("id","shop-mask");a(n).addClass("shop-mask");var p=a(window).width();var o=a(document).height();a(n).css({height:o,width:p});document.body.appendChild(n)}function l(q,v,p,w,s){var n=a.dom.create("div");a(n).attr("id",p);var o=a(window).width();var u=a(window).height();var r=(o-q)/2;var t=(u-v)/2+a.page.getScrollTop();a(n).addClass("red-win");if(s["class"]){a(n).addClass(s["class"])}a(n).css({width:q,position:"absolute",left:r,top:t});document.body.appendChild(n);a(n).html(w);a(".red-win .win-close").click(function(){if(s.reloadByClose){window.location.reload()}else{if(s.checkByClose){updateWealth();f()}else{f()}}});a(".red-win .cancel-btn").click(function(){f()});a(".red-win .close-btn").click(function(){f()});a(".red-win .reload-btn").click(function(){window.location.reload()});a(".red-win .check-btn").click(function(){f();updateWealth()});if(s.callback){s.callback()}}function f(){a(".shop-mask").remove();a(".red-win").remove()}function c(o){f();var n="<div class='tip'>"+o+"</div>";k({width:439,height:220,content:n,btn1:{value:"\u786e\u5b9a","class":"close-btn"}})}function i(o,q,r){if(o==q){var n="<div class='task2 task2-finish'>\u4eca\u65e5\u7ea2\u5305\u4efb\u52a1\u8fdb\u5ea6\uff1a"+o+"/"+q+"</div>"}else{var n="<div class='task2'>\u4eca\u65e5\u7ea2\u5305\u4efb\u52a1\u8fdb\u5ea6\uff1a<em>"+o+"/"+q+"</em></div>"}var p="<div class='task'>\u606d\u559c\u4f60\u5b8c\u6210\u4e86<em>"+o+"\u4e2a\u6625\u8282\u7ea2\u5305\u4efb\u52a1</em>\uff01"+r+"</div>"+n;k({width:439,height:187,content:p,btn1:{value:"\u5173\u95ed","class":"close-btn"}})}function h(r,q,o){var n="<div class='task2 task2-finish'>"+r+"</div>";var p="<div class='task'>\u7ea2\u5305\u6253\u5f00\uff0c\u597d\u793c\u62ff\u6765\uff01</div>"+n+"<div style='font-size: 14px;text-align: center;margin-top:15px;'>"+q+"</div>";k({width:439,height:187,content:p,btn1:{value:o,"class":"close-btn"}})}function g(o){var n="<div class='task'>\u9519\u8fc7\u4e86\u6d3b\u52a8\uff0c\u7ea2\u5305\u6ca1\u96c6\u9f50\u4e0d\u80fd\u62bd\u5927\u5956\u600e\u4e48\u529e\uff1f</div><div style='font-size: 14px;margin-top:10px;'>\u8fd8\u6709\u673a\u4f1a\u54e6\uff0c<em>\u53ea\u898150\u8d22\u5bcc\u503c\uff0c\u5c31\u53ef\u70b9\u4eae\u7ea2\u5305\u5566\uff01</em></div>";k({width:439,height:186,content:n,btn1:{value:"&nbsp;\u4e70&nbsp;"},btn2:{value:"\u4e0d\u4e70","class":"cancel-btn"},callback:function(){o()}})}var j="<form style='width: 610px;margin: 10px auto 10px;'><table style='margin-left:100px;'><tr><td class='alignr'><label>\u83b7\u5956ID\uff1a</label></td><td>\u5475\u5475</td></tr><tr><td class='alignr'><label for='red-name'>\u6536\u4ef6\u4eba\u59d3\u540d\uff1a</label></td><td><em>*</em><input id='red-name'/></td></tr><tr><td class='alignr'><label for='red-phone'>\u8054\u7cfb\u7535\u8bdd\uff1a</label></td><td><em>*</em><input id='red-phone'/></td></tr><tr><td class='alignr'><label for='red-address'>\u6536\u4ef6\u5730\u5740\uff1a</label></td><td><em>*</em><input id='red-address' style='width: 300px;'/></td></tr></table></form>";function e(p){var n=a.string.format("<div class='red-title'>#{title}</div>"+j,p);k({width:610,content:n,btn1:{value:"\u786e\u8ba4\u65e0\u8bef\uff0c\u63d0\u4ea4"},callback:function(){a("#red-win .btn1").click(function(){p.callback()})}})}d.showTask=i;d.showRed=h;d.showBuyRed=g;d.showTip=c;d.showWinForm=e;return d},["/static/common/lib/tangram/base/base.js"]);